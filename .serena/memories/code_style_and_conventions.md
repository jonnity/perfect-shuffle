# コードスタイルと規約

## TypeScript規約
- **Strictモード**: `strict: true`を有効化
- **型安全性**: `any`型を避ける（`unknown`または適切な型を使用）
- **型定義**: すべてのエクスポートされる関数とコンポーネントに明示的な型を付ける
- **型推論**: ローカル変数は型推論を活用
- **インターフェース**: オブジェクトの形状はインターフェースまたは型エイリアスで定義

## React規約
- **コンポーネント**: 関数コンポーネントのみ（クラスコンポーネントは使用しない）
- **Hooks**: React Hooksのルールに従う
  - フック呼び出しは関数トップレベルのみ
  - カスタムフックは`use`で始まる
- **Props**: TypeScriptインターフェースで型定義
- **State**: 必要最小限の状態管理
- **エフェクト**: 依存配列を適切に設定

## Biome設定
- **インデント**: スペース2つ
- **行幅**: 100文字
- **クオート**: ダブルクオート（`"`）
- **セミコロン**: 必要な場所のみ（`semicolons: "asNeeded"`）
- **トレイリングカンマ**: 推奨ルールに従う

## 命名規約
- **ファイル名**: 
  - コンポーネント: PascalCase（例: `CardCountSelector.tsx`）
  - ユーティリティ: camelCase（例: `fisherYatesShuffle.ts`）
  - Hooks: camelCase + `use`プレフィックス（例: `useCardCount.ts`）
- **変数・関数**: camelCase
- **コンポーネント**: PascalCase
- **定数**: UPPER_SNAKE_CASE（例: `MIN_CARD_COUNT`）
- **型・インターフェース**: PascalCase

## ディレクトリ構造規約
- **機能ベース**: `features/`配下に機能単位でディレクトリを作成
- **責務分離**: 
  - `components/`: 再利用可能なコンポーネント
  - `hooks/`: カスタムフック
  - `utils/`: ユーティリティ関数
  - `types/`: 型定義
- **テストファイル**: テスト対象と同じディレクトリ、または`__tests__/`配下
  - ファイル名: `*.test.ts`または`*.test.tsx`

## コーディング原則
- **Single Responsibility Principle**: 各関数・コンポーネントは単一の責務を持つ
- **DRY (Don't Repeat Yourself)**: 重複コードを避け、共通化する
- **KISS (Keep It Simple, Stupid)**: シンプルで理解しやすいコードを書く
- **モジュール性**: 関連するコードをまとめ、独立性を保つ
- **明確なインターフェース**: 関数・コンポーネントの入出力を明確にする

## コメントとドキュメント
- **JSDoc**: パブリック関数には必ずJSDocコメントを付ける
- **複雑なロジック**: アルゴリズムの説明をコメントで記載
- **TODO**: 一時的な解決策には`TODO:`コメントを付ける
- **型の説明**: 複雑な型には説明コメントを追加

## インポート順序
1. 外部ライブラリ（React, React Routerなど）
2. 内部モジュール（`@/`エイリアス、または相対パス）
3. 型定義のインポート
4. スタイル（Tailwind CSSはビルトインのため不要）

## スタイリング規約
- **Tailwind CSS**: ユーティリティクラスのみ使用（カスタムCSSは避ける）
- **モバイルファースト**: 375px幅を基準に設計
- **アクセシビリティ**: 
  - 最小タッチターゲット: 44x44px
  - コントラスト比: WCAG AA基準（4.5:1以上）
  - aria-label: 必要な場所に適切に付与

## エラーハンドリング
- **try-catch**: 外部APIやLocalStorage操作は必ずtry-catchでラップ
- **フォールバック**: エラー時の代替動作を用意
- **バリデーション**: ユーザー入力は必ずバリデート
- **型ガード**: `unknown`型の扱いには型ガードを使用