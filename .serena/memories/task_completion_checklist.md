# タスク完了時のチェックリスト

このドキュメントは、タスクを完了する際に必ず実行すべき手順をまとめたものです。

## 必須手順（すべてのタスクで実行）

### 1. コードフォーマット
```bash
npm run format
```
- **目的**: コードスタイルを統一し、可読性を向上
- **タイミング**: コード変更後、すぐに実行
- **期待結果**: フォーマットが自動適用され、エラーが出ない

### 2. テスト実行
```bash
npm run test -- --run
```
または
```bash
npm test
```
- **目的**: 新しい変更が既存機能を壊していないか確認
- **タイミング**: コード変更後、必ず実行
- **期待結果**: すべてのテストが合格（PASS）
- **注意**: テストが失敗した場合は、必ず修正してから次に進むこと

### 3. Lintチェック
```bash
npm run lint
```
- **目的**: コード品質の問題や潜在的なバグを検出
- **タイミング**: フォーマットとテストの後に実行
- **期待結果**: エラーや警告が0件
- **注意**: 警告も含めてすべて解決すること

### 4. ビルド確認（オプションだが推奨）
```bash
npm run build
```
- **目的**: 本番ビルドが正常に完了するか確認
- **タイミング**: 大きな変更や本番デプロイ前
- **期待結果**: ビルドが成功し、`dist/`ディレクトリが生成される
- **注意**: TypeScriptのコンパイルエラーがないことを確認

## チェックリスト（順序を守ること）

- [ ] 1. コード変更を完了
- [ ] 2. `npm run format` を実行
- [ ] 3. `npm test` を実行してすべて合格
- [ ] 4. `npm run lint` を実行してエラー・警告が0件
- [ ] 5. 必要に応じて `npm run build` で本番ビルドを確認
- [ ] 6. すべてのチェックが通過したらコミット

## エラー時の対処

### フォーマットエラー
- 通常は自動修正されるため、エラーが出ることは稀
- 構文エラーがある場合は修正が必要

### テスト失敗
- エラーメッセージを読んで原因を特定
- テストケースを確認し、期待する動作を理解
- コードを修正してテストを再実行

### Lintエラー
- エラーメッセージに従って修正
- 未使用の変数やインポートを削除
- 型エラーがある場合は適切な型を付与

### ビルドエラー
- TypeScriptのコンパイルエラーを確認
- 型定義が正しいか確認
- インポートパスが正しいか確認

## 重要な注意事項

**絶対にやってはいけないこと:**
- ❌ テストが失敗している状態でコミット
- ❌ Lintエラーを無視してコミット
- ❌ フォーマットせずにコミット
- ❌ ビルドが失敗する状態でプッシュ

**推奨される習慣:**
- ✅ 小さな変更ごとにテストを実行
- ✅ テストとLintを自動化（Pre-commit hook）
- ✅ コミット前に必ずすべてのチェックを通過
- ✅ PR作成前に本番ビルドを確認

## CI/CD環境

本プロジェクトでは、GitHub ActionsなどのCI/CDが設定されている場合があります。ローカルで上記のチェックをすべて通過していれば、CI/CDでも問題なく通過するはずです。

もしCI/CDで失敗した場合は、ローカルで同じコマンドを実行して問題を再現し、修正してください。